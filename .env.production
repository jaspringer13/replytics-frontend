# ===========================================
# REPLYTICS PRODUCTION ENVIRONMENT CONFIGURATION
# ===========================================
# This file contains all environment variables required for production deployment
# Copy this file and replace all placeholder values with actual production values
# SECURITY: Never commit actual production values to version control

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://app.replytics.com
NEXT_PUBLIC_API_URL=https://api.replytics.com
NEXT_PUBLIC_BACKEND_API_URL=https://voice-bot.replytics.com

# Build Configuration
BUILD_STANDALONE=false
ANALYZE=false
NEXT_PHASE=phase-production-build

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# Voice-Bot PostgreSQL (Primary Database)
VOICE_BOT_DB_HOST=prod-postgres.replytics.com
VOICE_BOT_DB_PORT=5432
VOICE_BOT_DB_NAME=replytics_production
VOICE_BOT_DB_USER=replytics_service
VOICE_BOT_DB_PASSWORD=[SECURE_256_BIT_DB_PASSWORD]
VOICE_BOT_DB_SSL=require
VOICE_BOT_DB_POOL_MIN=5
VOICE_BOT_DB_POOL_MAX=20
VOICE_BOT_DB_CONNECTION_TIMEOUT=30000
VOICE_BOT_DB_IDLE_TIMEOUT=600000
VOICE_BOT_DB_MAX_RETRIES=3
VOICE_BOT_DB_RETRY_DELAY=1000

# Supabase Configuration (Frontend Database)
NEXT_PUBLIC_SUPABASE_URL=https://[PROJECT_ID].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=[PRODUCTION_SUPABASE_ANON_KEY]
SUPABASE_SERVICE_ROLE_KEY=[PRODUCTION_SUPABASE_SERVICE_ROLE_KEY]
SUPABASE_JWT_SECRET=[SUPABASE_JWT_SECRET_256_BIT]
DATABASE_URL=postgres://postgres:[PASSWORD]@db.[PROJECT_ID].supabase.co:6543/postgres

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================

# NextAuth Configuration
NEXTAUTH_URL=https://app.replytics.com
NEXTAUTH_SECRET=[256_BIT_NEXTAUTH_SECRET_RANDOM_STRING]
JWT_SECRET_KEY=[256_BIT_JWT_SECRET_RANDOM_STRING]
SESSION_ENCRYPTION_KEY=[256_BIT_SESSION_ENCRYPTION_KEY]

# Google OAuth (Production Credentials)
GOOGLE_CLIENT_ID=[PRODUCTION_GOOGLE_CLIENT_ID]
GOOGLE_CLIENT_SECRET=[PRODUCTION_GOOGLE_CLIENT_SECRET]

# Voice Agent Authentication
VOICE_AGENT_AUTH_KEY=[256_BIT_VOICE_AGENT_AUTH_KEY]

# Business ID Resolution Cache
BUSINESS_ID_CACHE_TTL=300
BUSINESS_ID_CACHE_MAX_SIZE=10000

# Security Headers
SECURITY_HEADERS_ENABLED=true
CSRF_PROTECTION_ENABLED=true
XSS_PROTECTION_ENABLED=true
CONTENT_SECURITY_POLICY_ENABLED=true

# ===========================================
# VOICE SERVICES INTEGRATION
# ===========================================

# ElevenLabs Voice Synthesis
ELEVENLABS_API_KEY=[PRODUCTION_ELEVEN_LABS_API_KEY]
ELEVEN_LABS_VOICE_STABILITY=0.75
ELEVEN_LABS_VOICE_SIMILARITY=0.85
DEFAULT_VOICE_ID=kdmDKE6EkgrWrrykO9Qt

# Deepgram Speech-to-Text
DEEPGRAM_API_KEY=[PRODUCTION_DEEPGRAM_API_KEY]
DEEPGRAM_MODEL=nova-2
DEEPGRAM_LANGUAGE=en-US
DEEPGRAM_PUNCTUATE=true
DEEPGRAM_DIARIZE=true

# OpenAI Integration
OPENAI_API_KEY=[PRODUCTION_OPENAI_API_KEY]
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7
OPENAI_TOP_P=1.0
OPENAI_FREQUENCY_PENALTY=0.0
OPENAI_PRESENCE_PENALTY=0.0

# Twilio Phone Services
TWILIO_ACCOUNT_SID=[PRODUCTION_TWILIO_ACCOUNT_SID]
TWILIO_AUTH_TOKEN=[PRODUCTION_TWILIO_AUTH_TOKEN]
TWILIO_PHONE_NUMBER=[PRODUCTION_TWILIO_PHONE_NUMBER]
TWILIO_WEBHOOK_URL=https://voice-bot.replytics.com/webhook/twilio

# ===========================================
# CACHING & PERFORMANCE
# ===========================================

# Redis Configuration
REDIS_URL=redis://prod-redis.replytics.com:6379
REDIS_PASSWORD=[REDIS_PASSWORD_256_BIT]
REDIS_DB=0
REDIS_KEY_PREFIX=replytics:prod:
REDIS_CONNECTION_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3

# Cache TTL Settings (seconds)
CACHE_TTL_ANALYTICS=600         # 10 minutes
CACHE_TTL_BUSINESS_CONTEXT=300  # 5 minutes  
CACHE_TTL_USER_SESSION=1800     # 30 minutes
CACHE_TTL_QUERY_RESULTS=180     # 3 minutes
CACHE_TTL_VOICE_SETTINGS=900    # 15 minutes

# React Query Configuration
NEXT_PUBLIC_QUERY_STALE_TIME=300000      # 5 minutes
NEXT_PUBLIC_QUERY_GC_TIME=600000         # 10 minutes
NEXT_PUBLIC_PERFORMANCE_METRICS_TIMEOUT=5000
MAX_PERFORMANCE_METRICS=1000

# ===========================================
# MONITORING & LOGGING
# ===========================================

# Sentry Error Tracking
SENTRY_DSN=[PRODUCTION_SENTRY_DSN]
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_RELEASE=[RELEASE_VERSION]

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/replytics/app.log
LOG_RETENTION_DAYS=30
LOG_MAX_FILE_SIZE=100MB
LOG_MAX_FILES=10

# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SLOW_QUERY_THRESHOLD=1000
PERFORMANCE_MEMORY_THRESHOLD=512
PERFORMANCE_SAMPLE_RATE=0.1

# ===========================================
# RATE LIMITING & SECURITY
# ===========================================

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000     # 15 minutes
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_BURST_MAX=150
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# API Rate Limits (per endpoint)
RATE_LIMIT_ANALYTICS_MAX=100
RATE_LIMIT_VOICE_SETTINGS_MAX=50
RATE_LIMIT_BUSINESS_PROFILE_MAX=200

# DDoS Protection
DDOS_PROTECTION_ENABLED=true
MAX_CONCURRENT_REQUESTS=500
REQUEST_TIMEOUT_MS=30000

# ===========================================
# PAYMENT & BILLING
# ===========================================

# Stripe Configuration
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=[PRODUCTION_STRIPE_PUBLISHABLE_KEY]
STRIPE_SECRET_KEY=[PRODUCTION_STRIPE_SECRET_KEY]
STRIPE_WEBHOOK_SECRET=[PRODUCTION_STRIPE_WEBHOOK_SECRET]

# Stripe Price IDs
STRIPE_STARTER_PRICE_ID=[PRODUCTION_STARTER_PRICE_ID]
STRIPE_PROFESSIONAL_PRICE_ID=[PRODUCTION_PROFESSIONAL_PRICE_ID]
STRIPE_ENTERPRISE_PRICE_ID=[PRODUCTION_ENTERPRISE_PRICE_ID]

# ===========================================
# EXTERNAL INTEGRATIONS
# ===========================================

# Calendar Integration
GOOGLE_CALENDAR_CLIENT_ID=[GOOGLE_CALENDAR_CLIENT_ID]
GOOGLE_CALENDAR_CLIENT_SECRET=[GOOGLE_CALENDAR_CLIENT_SECRET]
OUTLOOK_CLIENT_ID=[OUTLOOK_CLIENT_ID]
OUTLOOK_CLIENT_SECRET=[OUTLOOK_CLIENT_SECRET]

# CRM Integration
SALESFORCE_CLIENT_ID=[SALESFORCE_CLIENT_ID]
SALESFORCE_CLIENT_SECRET=[SALESFORCE_CLIENT_SECRET]
HUBSPOT_API_KEY=[HUBSPOT_API_KEY]

# Email Services
SENDGRID_API_KEY=[SENDGRID_API_KEY]
SENDGRID_FROM_EMAIL=noreply@replytics.com
POSTMARK_API_KEY=[POSTMARK_API_KEY]

# SMS Services (Backup)
MESSAGEBIRD_API_KEY=[MESSAGEBIRD_API_KEY]
AWS_SNS_ACCESS_KEY_ID=[AWS_SNS_ACCESS_KEY_ID]
AWS_SNS_SECRET_ACCESS_KEY=[AWS_SNS_SECRET_ACCESS_KEY]
AWS_SNS_REGION=us-east-1

# ===========================================
# FEATURE FLAGS & CONFIGURATION
# ===========================================

# Analytics Features
ANALYTICS_REAL_TIME_ENABLED=true
ANALYTICS_EXPORT_ENABLED=true
ANALYTICS_HISTORICAL_RETENTION_DAYS=365
ANALYTICS_ADVANCED_METRICS_ENABLED=true

# Voice Features
VOICE_AI_ENABLED=true
VOICE_TRANSCRIPTION_ENABLED=true
VOICE_SYNTHESIS_ENABLED=true
VOICE_EMOTION_DETECTION_ENABLED=false
VOICE_LANGUAGE_DETECTION_ENABLED=true

# Integration Features
INTEGRATION_CALENDAR_ENABLED=true
INTEGRATION_CRM_ENABLED=true
INTEGRATION_WEBHOOK_ENABLED=true
INTEGRATION_EMAIL_ENABLED=true
INTEGRATION_SMS_ENABLED=true

# Business Features
MULTI_PHONE_SUPPORT_ENABLED=true
ADVANCED_ROUTING_ENABLED=true
CUSTOM_VOICE_TRAINING_ENABLED=false
REAL_TIME_COACHING_ENABLED=true

# ===========================================
# INFRASTRUCTURE CONFIGURATION
# ===========================================

# Load Balancer
LOAD_BALANCER_HEALTH_CHECK_PATH=/api/health
LOAD_BALANCER_TIMEOUT=30000

# CDN Configuration
CDN_DOMAIN=cdn.replytics.com
CDN_CACHE_CONTROL=public, max-age=31536000

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/replytics.com.crt
SSL_KEY_PATH=/etc/ssl/private/replytics.com.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Container Configuration
CONTAINER_PORT=3000
CONTAINER_HEALTH_CHECK_PORT=3001
CONTAINER_MEMORY_LIMIT=2048
CONTAINER_CPU_LIMIT=1000

# ===========================================
# BACKUP & DISASTER RECOVERY
# ===========================================

# Database Backup
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_S3_BUCKET=replytics-backups-prod
DB_BACKUP_S3_REGION=us-east-1

# Application Backup
APP_BACKUP_ENABLED=true
APP_BACKUP_S3_BUCKET=replytics-app-backups-prod
CONFIG_BACKUP_ENABLED=true

# ===========================================
# COMPLIANCE & AUDIT
# ===========================================

# GDPR Compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_POLICY_DAYS=1095  # 3 years
COOKIE_CONSENT_REQUIRED=true

# HIPAA Compliance (if applicable)
HIPAA_COMPLIANCE_ENABLED=false
PHI_ENCRYPTION_ENABLED=true
AUDIT_LOGGING_ENABLED=true

# SOC 2 Compliance
SOC2_COMPLIANCE_ENABLED=true
ACCESS_LOGGING_ENABLED=true
CHANGE_MANAGEMENT_LOGGING=true

# ===========================================
# DEVELOPMENT & DEBUGGING
# ===========================================

# Development Tools (Disabled in Production)
ENABLE_SOURCEMAPS=false
REACT_QUERY_DEVTOOLS_ENABLED=false
REDUX_DEVTOOLS_ENABLED=false

# Debug Configuration (Minimal in Production)
DEBUG_ENABLED=false
VERBOSE_LOGGING=false
PERFORMANCE_PROFILING=false

# API Documentation
API_DOCS_ENABLED=false
SWAGGER_UI_ENABLED=false

# ===========================================
# WEBHOOKS & NOTIFICATIONS
# ===========================================

# Webhook Configuration
WEBHOOK_TIMEOUT_MS=10000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_MS=1000
WEBHOOK_SECRET_KEY=[256_BIT_WEBHOOK_SECRET]

# Notification Services
SLACK_WEBHOOK_URL=[SLACK_WEBHOOK_URL_FOR_ALERTS]
DISCORD_WEBHOOK_URL=[DISCORD_WEBHOOK_URL_FOR_ALERTS]
EMAIL_ALERTS_ENABLED=true
SMS_ALERTS_ENABLED=true

# ===========================================
# ENVIRONMENT VALIDATION
# ===========================================

# Required Environment Variables Check
ENV_VALIDATION_ENABLED=true
ENV_VALIDATION_STRICT=true
ENV_VALIDATION_LOG_MISSING=true

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# Startup Validation
STARTUP_VALIDATION_ENABLED=true
STARTUP_DB_CONNECTION_CHECK=true
STARTUP_REDIS_CONNECTION_CHECK=true
STARTUP_EXTERNAL_API_CHECK=false

# ===========================================
# NOTES FOR DEPLOYMENT
# ===========================================

# 1. Replace all [PLACEHOLDER] values with actual production values
# 2. Ensure all secrets are at least 256 bits (64 hex characters) for security
# 3. Use separate credentials for each environment (dev/staging/prod)
# 4. Enable monitoring and alerting for all critical services
# 5. Regularly rotate all secrets and API keys
# 6. Test database connections and external service integrations
# 7. Verify rate limiting and security configurations
# 8. Configure proper backup and disaster recovery procedures
# 9. Enable comprehensive logging and monitoring
# 10. Validate all environment variables before deployment

# ===========================================
# SECURITY CHECKLIST
# ===========================================

# ✅ All secrets are 256+ bit random strings
# ✅ Database connections use SSL/TLS
# ✅ API keys are production-validated
# ✅ Rate limiting is properly configured
# ✅ CORS is configured for production domains only
# ✅ Security headers are enabled
# ✅ Authentication flows are properly secured
# ✅ Session management is configured correctly
# ✅ Error handling doesn't expose sensitive information
# ✅ Logging excludes sensitive data